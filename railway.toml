# Railway configuration for CyxCloud Gateway
# Deploy with: railway up
# Or connect GitHub repo at https://railway.app

[build]
# Use the gateway Dockerfile
dockerfilePath = "Dockerfile.gateway"
# Rust builds can take time
buildCommand = ""
watchPatterns = ["cyxcloud-*/src/**", "cyxcloud-*/Cargo.toml", "Cargo.toml", "Cargo.lock"]

[deploy]
# Number of instances
numReplicas = 1

# Health check endpoint
healthcheckPath = "/health"
healthcheckTimeout = 30

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Start command (optional, uses ENTRYPOINT from Dockerfile)
# startCommand = "cyxcloud-gateway"
